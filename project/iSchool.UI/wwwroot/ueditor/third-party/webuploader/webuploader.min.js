/*! WebUploader 0.1.2 */


/**
 * @fileOverview 让内部各个部件的代码可以用[amd](https://github.com/amdjs/amdjs-api/wiki/AMD)模块定义方式组织起来。
 *
 * AMD API 内部的简单不完全实现，请忽略。只有当WebUploader被合并成一个文件的时候才会引入。
 */
(function(m,l){var w={},g=function(b,a){var e,f,d;if("string"===typeof b)return h(b);e=[];f=b.length;for(d=0;d<f;d++)e.push(h(b[d]));return a.apply(null,e)},h=function(b){var a=w[b]||m[b];if(!a)throw Error("`"+b+"` is undefined");return a},k=l(m,function(b,a,e){2===arguments.length&&(e=a,a=null);g(a||[],function(){var a=arguments,d={exports:e};"function"===typeof e&&(a.length||(a=[g,d.exports,d]),a=e.apply(null,a),void 0!==a&&(d.exports=a));w[b]=d.exports})},g),c;(function(b){var a,e,f,d,n,c;c=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(a in w)if(e=b,w.hasOwnProperty(a)){f=a.split("/");for(n=c(f.pop());d=c(f.shift());)e[d]=e[d]||{},e=e[d];e[n]=w[a]}})(k);"object"===typeof module&&"object"===typeof module.exports?module.exports=k:"function"===typeof define&&define.amd?define([],k):(c=m.WebUploader,m.WebUploader=k,m.WebUploader.noConflict=function(){m.WebUploader=c})})(this,function(m,l,w){l("dollar-third",[],function(){return m.jQuery||m.Zepto});l("dollar",["dollar-third"],function(g){return g});l("promise-third",["dollar"],function(g){return{Deferred:g.Deferred,when:g.when,isPromise:function(g){return g&&"function"===typeof g.then}}});l("promise",["promise-third"],function(g){return g});l("base",["dollar","promise"],function(g,h){function k(a,d){return function(){return a.apply(d,arguments)}}function c(a){var d;if(Object.create)return Object.create(a);d=function(){};d.prototype=a;return new d}var b=function(){},a=Function.call,e=h.Deferred,f=h.isPromise,d=h.when,n=function(a){var d={},b=a.match(/WebKit\/([\d.]+)/),e=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),n=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),c=a.match(/Safari\/([\d.]+)/);a=a.match(/OPR\/([\d.]+)/);b&&(d.webkit=parseFloat(b[1]));e&&(d.chrome=parseFloat(e[1]));n&&(d.ie=parseFloat(n[1]));f&&(d.firefox=parseFloat(f[1]));c&&(d.safari=parseFloat(c[1]));a&&(d.opera=parseFloat(a[1]));return d}(navigator.userAgent),u=function(a){var d={},b=a.match(/(?:Android);?[\s\/]+([\d.]+)?/);a=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);b&&(d.android=parseFloat(b[1]));a&&(d.ios=parseFloat(a[1].replace(/_/g,".")));return d}(navigator.userAgent),C;C=m.console?k(console.log,console):b;return{version:"0.1.2",$:g,Deferred:e,isPromise:f,when:d,browser:n,os:u,inherits:function(a,d,b){var e;"function"===typeof d?(e=d,d=null):e=d&&d.hasOwnProperty("constructor")?d.constructor:function(){return a.apply(this,arguments)};g.extend(!0,e,a,b||{});e.__super__=a.prototype;e.prototype=c(a.prototype);d&&g.extend(!0,e.prototype,d);return e},noop:b,bindFn:k,log:C,nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:function(d){return function(){return a.apply(d,arguments)}}([].slice),guid:function(){var a=0;return function(d){for(var b=(+new Date).toString(32),e=0;5>e;e++)b+=Math.floor(65535*Math.random()).toString(32);return(d||"wu_")+b+(a++).toString(32)}}(),formatSize:function(a,d,b){var e;for(b=b||["B","K","M","G","TB"];(e=b.shift())&&1024<a;)a/=1024;return("B"===e?a:a.toFixed(d||2))+e}}});l("mediator",["base"],function(g){function h(a,e,f,c){return b.grep(a,function(a){return a&&(!e||a.e===e)&&(!f||a.cb===f||a.cb._cb===f)&&(!c||a.ctx===c)})}function k(a,f,c){b.each((a||"").split(e),function(a,d){c(d,f)})}function c(a,b){for(var d=!1,e=-1,f=a.length,c;++e<f;)if(c=a[e],!1===c.cb.apply(c.ctx2,b)){d=!0;break}return!d}var b=g.$,a=[].slice,e=/\s+/,f;f={on:function(a,b,e){var d=this,f;if(!b)return this;f=this._events||(this._events=[]);k(a,b,function(a,b){var c={e:a};c.cb=b;c.ctx=e;c.ctx2=e||d;c.id=f.length;f.push(c)});return this},once:function(a,b,e){var d=this;if(!b)return d;k(a,b,function(a,b){var f=function(){d.off(a,f);return b.apply(e||d,arguments)};f._cb=b;d.on(a,f,e)});return d},off:function(a,e,f){var d=this._events;if(!d)return this;if(!a&&!e&&!f)return this._events=[],this;k(a,e,function(a,e){b.each(h(d,a,e,f),function(){delete d[this.id]})});return this},trigger:function(d){var b,e,f;if(!this._events||!d)return this;b=a.call(arguments,1);e=h(this._events,d);f=h(this._events,"all");return c(e,b)&&c(f,arguments)}};return b.extend({installTo:function(a){return b.extend(a,f)}},f)});l("uploader",["base","mediator"],function(g,h){function k(b){this.options=c.extend(!0,{},k.options,b);this._init(this.options)}var c=g.$;k.options={};h.installTo(k.prototype);c.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",getDimension:"get-dimension",addButton:"add-btn",getRuntimeType:"get-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(b,a){k.prototype[b]=function(){return this.request(a,arguments)}});c.extend(k.prototype,{state:"pending",_init:function(b){var a=this;a.request("init",b,function(){a.state="ready";a.trigger("ready")})},option:function(b,a){var e=this.options;if(1<arguments.length)c.isPlainObject(a)&&c.isPlainObject(e[b])?c.extend(e[b],a):e[b]=a;else return b?e[b]:e},getStats:function(){var b=this.request("get-stats");return{successNum:b.numOfSuccess,cancelNum:b.numOfCancel,invalidNum:b.numOfInvalid,uploadFailNum:b.numOfUploadFailed,queueNum:b.numOfQueue}},trigger:function(b){var a=[].slice.call(arguments,1),e=this.options,f="on"+b.substring(0,1).toUpperCase()+b.substring(1);return!1===h.trigger.apply(this,arguments)||c.isFunction(e[f])&&!1===e[f].apply(this,a)||c.isFunction(this[f])&&!1===this[f].apply(this,a)||!1===h.trigger.apply(h,[this,b].concat(a))?!1:!0},request:g.noop});g.create=k.create=function(b){return new k(b)};return g.Uploader=k});l("runtime/runtime",["base","mediator"],function(g,h){function k(a){this.options=c.extend({container:document.body},a);this.uid=g.guid("rt_")}var c=g.$,b={},a=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};c.extend(k.prototype,{getContainer:function(){var a,b;if(this._container)return this._container;a=c(this.options.container||document.body);b=c(document.createElement("div"));b.attr("id","rt_"+this.uid);b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"});a.append(b);a.addClass("webuploader-container");return this._container=b},init:g.noop,exec:g.noop,destroy:function(){this._container&&this._container.parentNode.removeChild(this.__container);this.off()}});k.orders="html5,flash";k.addRuntime=function(a,f){b[a]=f};k.hasRuntime=function(e){return!(e?!b[e]:!a(b))};k.create=function(e,f){var d;f=f||k.orders;c.each(f.split(/\s*,\s*/g),function(){if(b[this])return d=this,!1});d=d||a(b);if(!d)throw Error("Runtime Error");return new b[d](e)};h.installTo(k.prototype);return k});l("runtime/client",["base","mediator","runtime/runtime"],function(g,h,k){function c(a,e){var f=g.Deferred(),d;this.uid=g.guid("client_");this.runtimeReady=function(a){return f.done(a)};this.connectRuntime=function(a,c){if(d)throw Error("already connected!");f.done(c);"string"===typeof a&&b.get(a)&&(d=b.get(a));(d=d||b.get(null,e))?(g.$.extend(d.options,a),d.__promise.then(f.resolve),d.__client++):(d=k.create(a,a.runtimeOrder),d.__promise=f.promise(),d.once("ready",f.resolve),d.init(),b.add(d),d.__client=1);e&&(d.__standalone=e);return d};this.getRuntime=function(){return d};this.disconnectRuntime=function(){d&&(d.__client--,0>=d.__client&&(b.remove(d),delete d.__promise,d.destroy()),d=null)};this.exec=function(){if(d){var b=g.slice(arguments);a&&b.unshift(a);return d.exec.apply(this,b)}};this.getRuid=function(){return d&&d.uid};this.destroy=function(a){return function(){a&&a.apply(this,arguments);this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()}}(this.destroy)}var b;b=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,f){var d;if(b)return a[b];for(d in a)if(!f||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}();h.installTo(c.prototype);return c});l("lib/dnd",["base","mediator","runtime/client"],function(g,h,k){function c(a){a=this.options=b.extend({},c.options,a);a.container=b(a.container);a.container.length&&k.call(this,"DragAndDrop")}var b=g.$;c.options={accept:null,disableGlobalDnd:!1};g.inherits(k,{constructor:c,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init");a.trigger("ready")})},destroy:function(){this.disconnectRuntime()}});h.installTo(c.prototype);return c});l("widgets/widget",["base","uploader"],function(g,h){function k(a){if(!a)return!1;var d=a.length,e=b.type(a);return 1===a.nodeType&&d?!0:"array"===e||"function"!==e&&"string"!==e&&(0===d||"number"===typeof d&&0<d&&d-1 in a)}function c(a){this.owner=a;this.options=a.options}var b=g.$,a=h.prototype._init,e={},f=[];b.extend(c.prototype,{init:g.noop,invoke:function(a,f){var d=this.responseMap;return d&&a in d&&d[a]in this&&b.isFunction(this[d[a]])?this[d[a]].apply(this,f):e},request:function(){return this.owner.request.apply(this.owner,arguments)}});b.extend(h.prototype,{_init:function(){var d=this,e=d._widgets=[];b.each(f,function(a,b){e.push(new b(d))});return a.apply(d,arguments)},request:function(a,b,f){var d=0,c=this._widgets,n=c.length,u=[],h=[],l;for(b=k(b)?b:[b];d<n;d++)l=c[d],l=l.invoke(a,b),l!==e&&(g.isPromise(l)?h.push(l):u.push(l));return f||h.length?(a=g.when.apply(g,h),b=a.pipe?"pipe":"then",a[b](function(){var a=g.Deferred(),b=arguments;setTimeout(function(){a.resolve.apply(a,b)},1);return a.promise()})[b](f||g.noop)):u[0]}});h.register=c.register=function(a,e){var d={init:"init"};1===arguments.length?(e=a,e.responseMap=d):e.responseMap=b.extend(d,a);d=g.inherits(c,e);f.push(d);return d};return c});l("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(g,h,k){var c=g.$;h.options.dnd="";return h.register({init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var a=this,e=g.Deferred();b=c.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});b=new k(b);b.once("ready",e.resolve);b.on("drop",function(b){a.request("add-file",[b])});b.on("accept",function(b){return a.owner.trigger("dndAccept",b)});b.init();return e.promise()}}})});l("lib/filepaste",["base","mediator","runtime/client"],function(g,h,k){function c(a){a=this.options=b.extend({},a);a.container=b(a.container||document.body);k.call(this,"FilePaste")}var b=g.$;g.inherits(k,{constructor:c,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init");a.trigger("ready")})},destroy:function(){this.exec("destroy");this.disconnectRuntime();this.off()}});h.installTo(c.prototype);return c});l("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(g,h,k){var c=g.$;return h.register({init:function(b){if(b.paste&&"html5"===this.request("predict-runtime-type")){var a=this,e=g.Deferred();b=c.extend({},{container:b.paste,accept:b.accept});b=new k(b);b.once("ready",e.resolve);b.on("paste",function(b){a.owner.request("add-file",[b])});b.init();return e.promise()}}})});l("lib/blob",["base","runtime/client"],function(g,h){function k(c,b){this.source=b;this.ruid=c;h.call(this,"Blob");this.uid=b.uid||this.uid;this.type=b.type||"";this.size=b.size||0;c&&this.connectRuntime(c)}g.inherits(h,{constructor:k,slice:function(c,b){return this.exec("slice",c,b)},getSource:function(){return this.source}});return k});l("lib/file",["base","lib/blob"],function(g,h){function k(a,e){var f;h.apply(this,arguments);this.name=e.name||"untitled"+c++;f=b.exec(e.name)?RegExp.$1.toLowerCase():"";!f&&this.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(this.type)?RegExp.$1.toLowerCase():"",this.name+="."+f);!this.type&&~"jpg,jpeg,png,gif,bmp".indexOf(f)&&(this.type="image/"+("jpg"===f?"jpeg":f));this.ext=f;this.lastModifiedDate=e.lastModifiedDate||(new Date).toLocaleString()}var c=1,b=/\.([^.]+)$/;return g.inherits(h,k)});l("lib/filepicker",["base","runtime/client","lib/file"],function(g,h,k){function c(a){a=this.options=b.extend({},c.options,a);a.container=b(a.id);if(!a.container.length)throw Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");a.innerHTML=a.innerHTML||a.label||a.container.html()||"";a.button=b(a.button||document.createElement("div"));a.button.html(a.innerHTML);a.container.html(a.button);h.call(this,"FilePicker",!0)}var b=g.$;c.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"};g.inherits(h,{constructor:c,init:function(){var a=this,e=a.options,c=e.button;c.addClass("webuploader-pick");a.on("all",function(d){switch(d){case "mouseenter":c.addClass("webuploader-pick-hover");break;case "mouseleave":c.removeClass("webuploader-pick-hover");break;case "change":d=a.exec("getFiles"),a.trigger("select",b.map(d,function(b){b=new k(a.getRuid(),b);b._refer=e.container;return b}),e.container)}});a.connectRuntime(e,function(){a.refresh();a.exec("init",e);a.trigger("ready")});b(m).on("resize",function(){a.refresh()})},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b.outerWidth?b.outerWidth():b.width(),d=b.outerHeight?b.outerHeight():b.height(),b=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(b)},enable:function(){this.options.button.removeClass("webuploader-pick-disable");this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"});a.addClass("webuploader-pick-disable")},destroy:function(){this.runtime&&(this.exec("destroy"),this.disconnectRuntime())}});return c});l("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(g,h,k){var c=g.$;c.extend(h.options,{pick:null,accept:null});return h.register({"add-btn":"addButton",refresh:"refresh",disable:"disable",enable:"enable"},{init:function(b){this.pickers=[];return b.pick&&this.addButton(b.pick)},refresh:function(){c.each(this.pickers,function(){this.refresh()})},addButton:function(b){var a=this,e=a.options,f=e.accept,d;if(b)return d=g.Deferred(),c.isPlainObject(b)||(b={id:b}),b=c.extend({},b,{accept:c.isPlainObject(f)?[f]:f,swf:e.swf,runtimeOrder:e.runtimeOrder}),b=new k(b),b.once("ready",d.resolve),b.on("select",function(b){a.owner.request("add-file",[b])}),b.init(),this.pickers.push(b),d.promise()},disable:function(){c.each(this.pickers,function(){this.disable()})},enable:function(){c.each(this.pickers,function(){this.enable()})}})});l("lib/image",["base","runtime/client","lib/blob"],function(g,h,k){function c(a){this.options=b.extend({},c.options,a);h.call(this,"Image");this.on("load",function(){this._info=this.exec("info");this._meta=this.exec("meta")})}var b=g.$;c.options={quality:90,crop:!1,preserveHeaders:!0,allowMagnify:!0};g.inherits(h,{constructor:c,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options);b.exec("loadFromBlob",a)})},resize:function(){var a=g.slice(arguments);return this.exec.apply(this,["resize"].concat(a))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){a=this.exec("getAsBlob",a);return new k(this.getRuid(),a)}});return c});l("widgets/image",["base","uploader","lib/image","widgets/widget"],function(g,h,k){var c=g.$,b;b=function(a){var b=0,c=[],d=function(){for(var d;c.length&&b<a;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]);a.once("destroy",function(){b-=e;setTimeout(d,1)});setTimeout(d,1)}}(5242880);c.extend(h.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}});return h.register({"make-thumb":"makeThumb","before-send-file":"compressImage"},{makeThumb:function(a,e,f,d){var n,g;a=this.request("get-file",a);a.type.match(/^image/)?(n=c.extend({},this.options.thumb),c.isPlainObject(f)&&(n=c.extend(n,f),f=null),f=f||n.width,d=d||n.height,g=new k(n),g.once("load",function(){a._info=a._info||g.info();a._meta=a._meta||g.meta();g.resize(f,d)}),g.once("complete",function(){e(!1,g.getAsDataUrl(n.type));g.destroy()}),g.once("error",function(){e(!0);g.destroy()}),b(g,a.source.size,function(){a._info&&g.info(a._info);a._meta&&g.meta(a._meta);g.loadFromBlob(a.source)})):e(!0)},compressImage:function(a){var b=this.options.compress||this.options.resize,f=b&&b.compressSize||307200,d,n;a=this.request("get-file",a);if(!(!b||a.size<f||a._compressed))return b=c.extend({},b),n=g.Deferred(),d=new k(b),n.always(function(){d.destroy();d=null}),d.once("error",n.reject),d.once("load",function(){a._info=a._info||d.info();a._meta=a._meta||d.meta();d.resize(b.width,b.height)}),d.once("complete",function(){var e,c;try{e=d.getAsBlob(b.type),c=a.size,e.size<c&&(a.source=e,a.size=e.size,a.trigger("resize",e.size,c)),a._compressed=!0,n.resolve()}catch(r){n.resolve()}}),a._info&&d.info(a._info),a._meta&&d.meta(a._meta),d.loadFromBlob(a.source),n.promise()}})});l("file",["base","mediator"],function(g,h){function k(e){this.name=e.name||"Untitled";this.size=e.size||0;this.type=e.type||"application";this.lastModifiedDate=e.lastModifiedDate||1*new Date;this.id="WU_FILE_"+c++;this.ext=b.exec(this.name)?RegExp.$1:"";this.statusText="";a[this.id]=k.Status.INITED;this.source=e;this.loaded=0;this.on("error",function(a){this.setStatus(k.Status.ERROR,a)})}var c=0,b=/\.([^.]+)$/,a={};g.$.extend(k.prototype,{setStatus:function(b,c){var d=a[this.id];"undefined"!==typeof c&&(this.statusText=c);b!==d&&(a[this.id]=b,this.trigger("statuschange",b,d))},getStatus:function(){return a[this.id]},getSource:function(){return this.source},destory:function(){delete a[this.id]}});h.installTo(k.prototype);k.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"};return k});l("queue",["base","mediator","file"],function(g,h,k){function c(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0};this._queue=[];this._map={}}var b=g.$,a=k.Status;b.extend(c.prototype,{append:function(a){this._queue.push(a);this._fileAdded(a);return this},prepend:function(a){this._queue.unshift(a);this._fileAdded(a);return this},getFile:function(a){return"string"!==typeof a?a:this._map[a]},fetch:function(b){var e=this._queue.length,d,c;b=b||a.QUEUED;for(d=0;d<e;d++)if(c=this._queue[d],b===c.getStatus())return c;return null},sort:function(a){"function"===typeof a&&this._queue.sort(a)},getFiles:function(){for(var a=[].slice.call(arguments,0),c=[],d=0,n=this._queue.length,g;d<n;d++)g=this._queue[d],a.length&&!~b.inArray(g.getStatus(),a)||c.push(g);return c},_fileAdded:function(b){var c=this;this._map[b.id]||(this._map[b.id]=b,b.on("statuschange",function(a,b){c._onFileStatusChange(a,b)}));b.setStatus(a.QUEUED)},_onFileStatusChange:function(b,c){var d=this.stats;switch(c){case a.PROGRESS:d.numOfProgress--;break;case a.QUEUED:d.numOfQueue--;break;case a.ERROR:d.numOfUploadFailed--;break;case a.INVALID:d.numOfInvalid--}switch(b){case a.QUEUED:d.numOfQueue++;break;case a.PROGRESS:d.numOfProgress++;break;case a.ERROR:d.numOfUploadFailed++;break;case a.COMPLETE:d.numOfSuccess++;break;case a.CANCELLED:d.numOfCancel++;break;case a.INVALID:d.numOfInvalid++}}});h.installTo(c.prototype);return c});l("widgets/queue","base uploader queue file lib/file runtime/client widgets/widget".split(" "),function(g,h,k,c,b,a){var e=g.$,f=/\.\w+$/,d=c.Status;return h.register({"sort-files":"sortFiles","add-file":"addFiles","get-file":"getFile","fetch-file":"fetchFile","get-stats":"getStats","get-files":"getFiles","remove-file":"removeFile",retry:"retry",reset:"reset","accept-file":"acceptFile"},{init:function(b){var d=this,c,f,n,h,l,m,z;e.isPlainObject(b.accept)&&(b.accept=[b.accept]);if(b.accept){l=[];n=0;for(f=b.accept.length;n<f;n++)(h=b.accept[n].extensions)&&l.push(h);l.length&&(m="\\."+l.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$");d.accept=new RegExp(m,"i")}d.queue=new k;d.stats=d.queue.stats;if("html5"===this.request("predict-runtime-type"))return c=g.Deferred(),z=new a("Placeholder"),z.connectRuntime({runtimeOrder:"html5"},function(){d._ruid=z.getRuid();c.resolve()}),c.promise()},_wrapFile:function(a){if(!(a instanceof c)){if(!(a instanceof b)){if(!this._ruid)throw Error("Can't add external files.");a=new b(this._ruid,a)}a=new c(a)}return a},acceptFile:function(a){return!(!a||6>a.size||this.accept&&f.exec(a.name)&&!this.accept.test(a.name))},_addFile:function(a){a=this._wrapFile(a);if(this.owner.trigger("beforeFileQueued",a)){if(this.acceptFile(a))return this.queue.append(a),this.owner.trigger("fileQueued",a),a;this.owner.trigger("error","Q_TYPE_DENIED",a)}},getFile:function(a){return this.queue.getFile(a)},addFiles:function(a){var b=this;a.length||(a=[a]);a=e.map(a,function(a){return b._addFile(a)});b.owner.trigger("filesQueued",a);b.options.auto&&b.request("start-upload")},getStats:function(){return this.stats},removeFile:function(a){a=a.id?a:this.queue.getFile(a);a.setStatus(d.CANCELLED);this.owner.trigger("fileDequeued",a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var c,e,f;if(a)a=a.id?a:this.queue.getFile(a),a.setStatus(d.QUEUED),b||this.request("start-upload");else{c=this.queue.getFiles(d.ERROR);e=0;for(f=c.length;e<f;e++)a=c[e],a.setStatus(d.QUEUED);this.request("start-upload")}},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.queue=new k;this.stats=this.queue.stats}})});l("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(g,h){g.support=function(){return h.hasRuntime.apply(h,arguments)};return g.register({"predict-runtime-type":"predictRuntmeType"},{init:function(){if(!this.predictRuntmeType())throw Error("Runtime Error");},predictRuntmeType:function(){var g=this.options.runtimeOrder||h.orders,c=this.type,b,a;if(!c)for(g=g.split(/\s*,\s*/g),b=0,a=g.length;b<a;b++)if(h.hasRuntime(g[b])){this.type=c=g[b];break}return c}})});l("lib/transport",["base","runtime/client","mediator"],function(g,h,k){function c(a){var e=this;a=e.options=b.extend(!0,{},c.options,a||{});h.call(this,"Transport");this._blob=null;this._formData=a.formData||{};this._headers=a.headers||{};this.on("progress",this._timeout);this.on("load error",function(){e.trigger("progress",1);clearTimeout(e._timer)})}var b=g.$;c.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12E4,formData:{},headers:{},sendAsBinary:!1};b.extend(c.prototype,{appendBlob:function(a,b,c){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime();d.connectRuntime(b.ruid,function(){d.exec("init")});d._blob=b;e.fileVal=a||e.fileVal;e.filename=c||e.filename},append:function(a,c){"object"===typeof a?b.extend(this._formData,a):this._formData[a]=c},setRequestHeader:function(a,c){"object"===typeof a?b.extend(this._headers,a):this._headers[a]=c},send:function(a){this.exec("send",a);this._timeout()},abort:function(){clearTimeout(this._timer);return this.exec("abort")},destroy:function(){this.trigger("destroy");this.off();this.exec("destroy");this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),a._timer=setTimeout(function(){a.abort();a.trigger("error","timeout")},b))}});k.installTo(c.prototype);return c});l("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(g,h,k,c){function b(a,b){for(var d=[],c=a.source.size,e=b?Math.ceil(c/b):1,f=0,g=0,n;g<e;)n=Math.min(b,c-f),d.push({file:a,start:f,end:b?f+n:c,total:c,chunks:e,chunk:g++}),f+=n;a.blocks=d.concat();a.remaning=d.length;return{file:a,has:function(){return!!d.length},fetch:function(){return d.shift()}}}var a=g.$,e=g.isPromise,f=k.Status;a.extend(h.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:null});h.register({"start-upload":"start","stop-upload":"stop","skip-file":"skipFile","is-in-progress":"isInProgress"},{init:function(){var b=this.owner;this.runing=!1;this.pool=[];this.pending=[];this.remaning=0;this.__tick=g.bindFn(this._tick,this);b.on("uploadComplete",function(b){b.blocks&&a.each(b.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy());delete b.transport});delete b.blocks;delete b.remaning})},start:function(){var b=this;a.each(b.request("get-files",f.INVALID),function(){b.request("remove-file",this)});b.runing||(b.runing=!0,a.each(b.pool,function(a,d){var c=d.file;c.getStatus()===f.INTERRUPT&&(c.setStatus(f.PROGRESS),b._trigged=!1,d.transport&&d.transport.send())}),b._trigged=!1,b.owner.trigger("startUpload"),g.nextTick(b.__tick))},stop:function(b){!1!==this.runing&&(this.runing=!1,b&&a.each(this.pool,function(a,b){b.transport&&b.transport.abort();b.file.setStatus(f.INTERRUPT)}),this.owner.trigger("stopUpload"))},isInProgress:function(){return!!this.runing},getStats:function(){return this.request("get-stats")},skipFile:function(b,c){b=this.request("get-file",b);b.setStatus(c||f.COMPLETE);b.skipped=!0;b.blocks&&a.each(b.blocks,function(a,b){var d=b.transport;d&&(d.abort(),d.destroy(),delete b.transport)});this.owner.trigger("uploadSkip",b)},_tick:function(){var a=this,b=a.options,c;if(a._promise)return a._promise.always(a.__tick);a.pool.length<b.threads&&(c=a._nextBlock())?(a._trigged=!1,b=function(b){a._promise=null;b&&b.file&&a._startSend(b);g.nextTick(a.__tick)},a._promise=e(c)?c.always(b):b(c)):a.remaning||a.getStats().numOfQueue||(a.runing=!1,a._trigged||g.nextTick(function(){a.owner.trigger("uploadFinished")}),a._trigged=!0)},_nextBlock:function(){var a=this,c=a._act,g=a.options,k,h;if(c&&c.has()&&c.file.getStatus()===f.PROGRESS)return g.prepareNextFile&&!a.pending.length&&a._prepareNextFile(),c.fetch();if(a.runing)return!a.pending.length&&a.getStats().numOfQueue&&a._prepareNextFile(),k=a.pending.shift(),h=function(d){if(!d)return null;c=b(d,g.chunked?g.chunkSize:0);a._act=c;return c.fetch()},e(k)?k[k.pipe?"pipe":"then"](h):h(k)},_prepareNextFile:function(){var b=this,c=b.request("fetch-file"),e=b.pending,g;c&&(g=b.request("before-send-file",c,function(){return c.getStatus()===f.QUEUED?(b.owner.trigger("uploadStart",c),c.setStatus(f.PROGRESS),c):b._finishFile(c)}),g.done(function(){var b=a.inArray(g,e);~b&&e.splice(b,1,c)}),g.fail(function(a){c.setStatus(f.ERROR,a);b.owner.trigger("uploadError",c,a);b.owner.trigger("uploadComplete",c)}),e.push(g))},_popBlock:function(b){var c=a.inArray(b,this.pool);this.pool.splice(c,1);b.file.remaning--;this.remaning--},_startSend:function(a){var b=this,c=a.file;b.pool.push(a);b.remaning++;a.blob=1===a.chunks?c.source:c.source.slice(a.start,a.end);b.request("before-send",a,function(){c.getStatus()===f.PROGRESS?b._doSend(a):(b._popBlock(a),g.nextTick(b.__tick))}).fail(function(){1===c.remaning?b._finishFile(c).always(function(){a.percentage=1;b._popBlock(a);b.owner.trigger("uploadComplete",c);g.nextTick(b.__tick)}):(a.percentage=1,b._popBlock(a),g.nextTick(b.__tick))})},_doSend:function(b){var d=this,e=d.owner,k=d.options,h=b.file,l=new c(k),p=a.extend({},k.formData),H=a.extend({},k.headers),m,z;b.transport=l;l.on("destroy",function(){delete b.transport;d._popBlock(b);g.nextTick(d.__tick)});l.on("progress",function(c){var d=0,f=0,d=b.percentage=c;1<b.chunks&&(a.each(h.blocks,function(a,b){f+=(b.percentage||0)*(b.end-b.start)}),d=f/h.size);e.trigger("uploadProgress",h,d||0)});m=function(a){z=l.getResponseAsJson()||{};z._raw=l.getResponse();e.trigger("uploadAccept",b,z,function(b){a=b})||(a=a||"server");return a};l.on("error",function(a,c){b.retried=b.retried||0;1<b.chunks&&~"http,abort".indexOf(a)&&b.retried<k.chunkRetry?(b.retried++,l.send()):(c||"server"!==a||(a=m(a)),h.setStatus(f.ERROR,a),e.trigger("uploadError",h,a),e.trigger("uploadComplete",h))});l.on("load",function(){var a;(a=m())?l.trigger("error",a,!0):1===h.remaning?d._finishFile(h,z):l.destroy()});p=a.extend(p,{id:h.id,name:h.name,type:h.type,lastModifiedDate:h.lastModifiedDate,size:h.size});1<b.chunks&&a.extend(p,{chunks:b.chunks,chunk:b.chunk});e.trigger("uploadBeforeSend",b,p,H);l.appendBlob(k.fileVal,b.blob,h.name);l.append(p);l.setRequestHeader(H);l.send()},_finishFile:function(a,b,c){var d=this.owner;return d.request("after-send-file",arguments,function(){a.setStatus(f.COMPLETE);d.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===f.PROGRESS&&a.setStatus(f.ERROR,b);d.trigger("uploadError",a,b)}).always(function(){d.trigger("uploadComplete",a)})}})});l("widgets/validator",["base","uploader","file","widgets/widget"],function(g,h,k){var c=g.$,b={};g={addValidator:function(a,c){b[a]=c},removeValidator:function(a){delete b[a]}};h.register({init:function(){var a=this;c.each(b,function(){this.call(a.owner)})}});g.addValidator("fileNumLimit",function(){var a=0,b=this.options.fileNumLimit>>0,c=!0;b&&(this.on("beforeFileQueued",function(d){a>=b&&c&&(c=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",b,d),setTimeout(function(){c=!0},1));return a>=b?!1:!0}),this.on("fileQueued",function(){a++}),this.on("fileDequeued",function(){a--}),this.on("uploadFinished",function(){a=0}))});g.addValidator("fileSizeLimit",function(){var a=0,b=this.options.fileSizeLimit>>0,c=!0;b&&(this.on("beforeFileQueued",function(d){var e=a+d.size>b;e&&c&&(c=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",b,d),setTimeout(function(){c=!0},1));return e?!1:!0}),this.on("fileQueued",function(b){a+=b.size}),this.on("fileDequeued",function(b){a-=b.size}),this.on("uploadFinished",function(){a=0}))});g.addValidator("fileSingleSizeLimit",function(){var a=this.options.fileSingleSizeLimit;if(a)this.on("beforeFileQueued",function(b){if(b.size>a)return b.setStatus(k.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",b),!1})});g.addValidator("duplicate",function(){var a={};this.options.duplicate||(this.on("beforeFileQueued",function(b){var c;if(!(c=b.__hash)){c=b.name+b.size+b.lastModifiedDate;for(var d=0,e=0,g=c.length,k;e<g;e++)k=c.charCodeAt(e),d=k+(d<<6)+(d<<16)-d;c=b.__hash=d}if(a[c])return this.trigger("error","F_DUPLICATE",b),!1}),this.on("fileQueued",function(b){(b=b.__hash)&&(a[b]=!0)}),this.on("fileDequeued",function(b){(b=b.__hash)&&delete a[b]}))});return g});l("runtime/compbase",[],function(){return function(g,h){this.owner=g;this.options=g.options;this.getRuntime=function(){return h};this.getRuid=function(){return h.uid};this.trigger=function(){return g.trigger.apply(g,arguments)}}});l("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(g,h,k){function c(){var a={},c=this,f=this.destory;h.apply(c,arguments);c.type="html5";c.exec=function(d,e){var f=this.uid,k=g.slice(arguments,2);if(b[d]&&(f=a[f]=a[f]||new b[d](this,c),f[e]))return f[e].apply(f,k)};c.destory=function(){return f&&f.apply(this,arguments)}}var b={};g.inherits(h,{constructor:c,init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}});c.register=function(a,c){return b[a]=g.inherits(k,c)};m.Blob&&m.FileReader&&m.DataView&&h.addRuntime("html5",c);return c});l("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(g,h){return g.register("Blob",{slice:function(g,c){var b=this.owner.source,b=(b.slice||b.webkitSlice||b.mozSlice).call(b,g,c);return new h(this.getRuid(),b)}})});l("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(g,h,k){var c=g.$;return h.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=g.bindFn(this._dragEnterHandler,this);this.dragOverHandler=g.bindFn(this._dragOverHandler,this);this.dragLeaveHandler=g.bindFn(this._dragLeaveHandler,this);this.dropHandler=g.bindFn(this._dropHandler,this);this.dndOver=!1;b.on("dragenter",this.dragEnterHandler);b.on("dragover",this.dragOverHandler);b.on("dragleave",this.dragLeaveHandler);b.on("drop",this.dropHandler);this.options.disableGlobalDnd&&(c(document).on("dragover",this.dragOverHandler),c(document).on("drop",this.dropHandler))},_dragEnterHandler:function(b){var a=this._denied||!1,c;b=b.originalEvent||b;this.dndOver||(this.dndOver=!0,(c=b.dataTransfer.items)&&c.length&&(this._denied=a=!this.trigger("accept",c)),this.elem.addClass("webuploader-dnd-over"),this.elem[a?"addClass":"removeClass"]("webuploader-dnd-denied"));b.dataTransfer.dropEffect=a?"none":"copy";return!1},_dragOverHandler:function(b){var a=this.elem.parent().get(0);if(a&&!c.contains(a,b.currentTarget))return!1;clearTimeout(this._leaveTimer);this._dragEnterHandler.call(this,b);return!1},_dragLeaveHandler:function(){var b=this;clearTimeout(b._leaveTimer);b._leaveTimer=setTimeout(function(){b.dndOver=!1;b.elem.removeClass("webuploader-dnd-over webuploader-dnd-denied")},100);return!1},_dropHandler:function(b){var a=this,e=a.getRuid(),f=a.elem.parent().get(0);if(f&&!c.contains(f,b.currentTarget))return!1;a._getTansferFiles(b,function(b){a.trigger("drop",c.map(b,function(a){return new k(e,a)}))});a.dndOver=!1;a.elem.removeClass("webuploader-dnd-over");return!1},_getTansferFiles:function(b,a){var c=[],f=[],d,k,h,l,r,m,p;b=b.originalEvent||b;k=b.dataTransfer;d=k.items;k=k.files;p=!(!d||!d[0].webkitGetAsEntry);r=0;for(m=k.length;r<m;r++)h=k[r],l=d&&d[r],p&&l.webkitGetAsEntry().isDirectory?f.push(this._traverseDirectoryTree(l.webkitGetAsEntry(),c)):c.push(h);g.when.apply(g,f).done(function(){c.length&&a(c)})},_traverseDirectoryTree:function(b,a){var c=g.Deferred(),f=this;b.isFile?b.file(function(b){a.push(b);c.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var d=b.length,e=[],k=[],h;for(h=0;h<d;h++)e.push(f._traverseDirectoryTree(b[h],k));g.when.apply(g,e).then(function(){a.push.apply(a,k);c.resolve()},c.reject)});return c.promise()},destroy:function(){var b=this.elem;b.off("dragenter",this.dragEnterHandler);b.off("dragover",this.dragEnterHandler);b.off("dragleave",this.dragLeaveHandler);b.off("drop",this.dropHandler);this.options.disableGlobalDnd&&(c(document).off("dragover",this.dragOverHandler),c(document).off("drop",this.dropHandler))}})});l("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(g,h,k){return h.register("FilePaste",{init:function(){var c=this.options,b=this.elem=c.container,a=".*",e,f,d,k;if(c.accept){e=[];f=0;for(d=c.accept.length;f<d;f++)(k=c.accept[f].mimeTypes)&&e.push(k);e.length&&(a=e.join(","),a=a.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=new RegExp(a,"i");this.hander=g.bindFn(this._pasteHander,this);b.on("paste",this.hander)},_pasteHander:function(c){var b=[],a=this.getRuid(),e,f,d,g,h;c=c.originalEvent||c;e=c.clipboardData.items;g=0;for(h=e.length;g<h;g++)f=e[g],"file"===f.kind&&(d=f.getAsFile())&&b.push(new k(a,d));b.length&&(c.preventDefault(),c.stopPropagation(),this.trigger("paste",b))},destroy:function(){this.elem.off("paste",this.hander)}})});l("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(g,h){var k=g.$;return h.register("FilePicker",{init:function(){var c=this.getRuntime().getContainer(),b=this,a=b.owner,e=b.options,f=k(document.createElement("label")),d=k(document.createElement("input")),g,h,l,r;d.attr("type","file");d.attr("name",e.name);d.addClass("webuploader-element-invisible");f.on("click",function(){d.trigger("click")});f.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"});e.multiple&&d.attr("multiple","multiple");if(e.accept&&0<e.accept.length){g=[];h=0;for(l=e.accept.length;h<l;h++)g.push(e.accept[h].mimeTypes);d.attr("accept",g.join(","))}c.append(d);c.append(f);r=function(b){a.trigger(b.type)};d.on("change",function(c){var e=arguments.callee,f;b.files=c.target.files;f=this.cloneNode(!0);this.parentNode.replaceChild(f,this);d.off();d=k(f).on("change",e).on("mouseenter mouseleave",r);a.trigger("change")});f.on("mouseenter mouseleave",r)},getFiles:function(){return this.files},destroy:function(){}})});l("runtime/html5/util",["base"],function(g){var h=m.createObjectURL&&m||m.URL&&URL.revokeObjectURL&&URL||m.webkitURL,k=g=g.noop;h&&(g=function(){return h.createObjectURL.apply(h,arguments)},k=function(){return h.revokeObjectURL.apply(h,arguments)});return{createObjectURL:g,revokeObjectURL:k,dataURL2Blob:function(c){var b,a,e,f;f=c.split(",");b=~f[0].indexOf("base64")?atob(f[1]):decodeURIComponent(f[1]);c=new ArrayBuffer(b.length);a=new Uint8Array(c);for(e=0;e<b.length;e++)a[e]=b.charCodeAt(e);b=f[0].split(":")[1].split(";")[0];return this.arrayBufferToBlob(c,b)},dataURL2ArrayBuffer:function(c){var b,a;c=c.split(",");c=~c[0].indexOf("base64")?atob(c[1]):decodeURIComponent(c[1]);b=new Uint8Array(c.length);for(a=0;a<c.length;a++)b[a]=c.charCodeAt(a);return b.buffer},arrayBufferToBlob:function(c,b){var a=m.BlobBuilder||m.WebKitBlobBuilder;return a?(a=new a,a.append(c),a.getBlob(b)):new Blob([c],b?{type:b}:{})},canvasToDataUrl:function(c,b,a){return c.toDataURL(b,a/100)},parseMeta:function(c,b){b(!1,{})},updateImageHead:function(c){return c}}});l("runtime/html5/imagemeta",["runtime/html5/util"],function(g){var h;h={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(g,c){var b=this,a=new FileReader;a.onload=function(){c(!1,b._parse(this.result));a=a.onload=a.onerror=null};a.onerror=function(b){c(b.message);a=a.onload=a.onerror=null};g=g.slice(0,b.maxMetaDataSize);a.readAsArrayBuffer(g.getSource())},_parse:function(g,c){if(!(6>g.byteLength)){var b=new DataView(g),a=2,e=b.byteLength-4,f=a,d={},k,l;if(65496===b.getUint16(0)){for(;a<e;)if(k=b.getUint16(a),65504<=k&&65519>=k||65534===k){l=b.getUint16(a+2)+2;if(a+l>b.byteLength)break;f=h.parsers[k];if(!c&&f)for(k=0;k<f.length;k+=1)f[k].call(h,b,a,l,d);f=a+=l}else break;6<f&&(d.imageHead=g.slice?g.slice(2,f):(new Uint8Array(g)).subarray(2,f))}return d}},updateImageHead:function(g,c){var b=this._parse(g,!0),a;a=2;b.imageHead&&(a=2+b.imageHead.byteLength);a=g.slice?g.slice(a):(new Uint8Array(g)).subarray(a);b=new Uint8Array(c.byteLength+2+a.byteLength);b[0]=255;b[1]=216;b.set(new Uint8Array(c),2);b.set(new Uint8Array(a),c.byteLength+2);return b.buffer}};g.parseMeta=function(){return h.parse.apply(h,arguments)};g.updateImageHead=function(){return h.updateImageHead.apply(h,arguments)};return h});l("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(g,h){var k={ExifMap:function(){return this}};k.ExifMap.prototype.map={Orientation:274};k.ExifMap.prototype.get=function(c){return this[c]||this[this.map[c]]};k.exifTagTypes={1:{getValue:function(c,b){return c.getUint8(b)},size:1},2:{getValue:function(c,b){return String.fromCharCode(c.getUint8(b))},size:1,ascii:!0},3:{getValue:function(c,b,a){return c.getUint16(b,a)},size:2},4:{getValue:function(c,b,a){return c.getUint32(b,a)},size:4},5:{getValue:function(c,b,a){return c.getUint32(b,a)/c.getUint32(b+4,a)},size:8},9:{getValue:function(c,b,a){return c.getInt32(b,a)},size:4},10:{getValue:function(c,b,a){return c.getInt32(b,a)/c.getInt32(b+4,a)},size:8}};k.exifTagTypes[7]=k.exifTagTypes[1];k.getExifValue=function(c,b,a,e,f,d){e=k.exifTagTypes[e];var h,l;if(e)if(h=e.size*f,l=4<h?b+c.getUint32(a+8,d):a+8,l+h>c.byteLength)g.log("Invalid Exif data: Invalid data offset.");else{if(1===f)return e.getValue(c,l,d);b=[];for(a=0;a<f;a+=1)b[a]=e.getValue(c,l+a*e.size,d);if(e.ascii){c="";for(a=0;a<b.length;a+=1){f=b[a];if("\x00"===f)break;c+=f}return c}return b}else g.log("Invalid Exif data: Invalid tag type.")};k.parseExifTag=function(c,b,a,e,f){var d=c.getUint16(a,e);f.exif[d]=k.getExifValue(c,b,a,c.getUint16(a+2,e),c.getUint32(a+4,e),e)};k.parseExifTags=function(c,b,a,e,f){var d,k,h;if(a+6>c.byteLength)g.log("Invalid Exif data: Invalid directory offset.");else if(d=c.getUint16(a,e),k=a+2+12*d,k+4>c.byteLength)g.log("Invalid Exif data: Invalid directory size.");else{for(h=0;h<d;h+=1)this.parseExifTag(c,b,a+2+12*h,e,f);return c.getUint32(k,e)}};k.parseExifData=function(c,b,a,e){a=b+10;var f;if(1165519206===c.getUint32(b+4))if(a+8>c.byteLength)g.log("Invalid Exif data: Invalid segment size.");else if(0!==c.getUint16(b+8))g.log("Invalid Exif data: Missing byte alignment offset.");else{switch(c.getUint16(a)){case 18761:b=!0;break;case 19789:b=!1;break;default:g.log("Invalid Exif data: Invalid byte alignment marker.");return}42!==c.getUint16(a+2,b)?g.log("Invalid Exif data: Missing TIFF marker."):(f=c.getUint32(a+4,b),e.exif=new k.ExifMap,k.parseExifTags(c,a,a+f,b,e))}};h.parsers[65505].push(k.parseExifData);return k});l("runtime/html5/jpegencoder",[],function(g,h,k){function c(b){function a(a,b){for(var c=0,d=0,e=[],f=1;16>=f;f++){for(var g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function c(a){var b=a[0];for(a=a[1]-1;0<=a;)b&1<<a&&(I|=1<<D),a--,D--,0>D&&(255==I?(f(255),f(0)):f(I),D=7,I=0)}function f(a){M.push(Q[a])}function d(a){f(a>>8&255);f(a&255)}function g(a,b,d,e,f){var g=f[0],k=f[240],h,l,n,v,u,p,t,m,r,q=0;for(h=0;8>h;++h){l=a[q];n=a[q+1];v=a[q+2];u=a[q+3];p=a[q+4];t=a[q+5];m=a[q+6];r=a[q+7];var A=l+r;l-=r;r=n+m;n-=m;m=v+t;v-=t;t=u+p;u-=p;p=A+t;A-=t;t=r+m;r-=m;a[q]=p+t;a[q+4]=p-t;p=.707106781*(r+A);a[q+2]=A+p;a[q+6]=A-p;p=u+v;t=v+n;r=n+l;v=.382683433*(p-r);u=.5411961*p+v;p=1.306562965*r+v;t*=.707106781;v=l+t;l-=t;a[q+5]=l+u;a[q+3]=l-u;a[q+1]=v+p;a[q+7]=v-p;q+=8}for(h=q=0;8>h;++h)l=a[q],n=a[q+8],v=a[q+16],u=a[q+24],p=a[q+32],t=a[q+40],m=a[q+48],r=a[q+56],A=l+r,l-=r,r=n+m,n-=m,m=v+t,v-=t,t=u+p,u-=p,p=A+t,A-=t,t=r+m,r-=m,a[q]=p+t,a[q+32]=p-t,p=.707106781*(r+A),a[q+16]=A+p,a[q+48]=A-p,p=u+v,t=v+n,r=n+l,v=.382683433*(p-r),u=.5411961*p+v,p=1.306562965*r+v,t*=.707106781,v=l+t,l-=t,a[q+40]=l+u,a[q+24]=l-u,a[q+8]=v+p,a[q+56]=v-p,q++;for(h=0;64>h;++h)q=a[h]*b[h],P[h]=0<q?q+.5|0:q-.5|0;a=P;for(b=0;64>b;++b)E[K[b]]=a[b];a=E[0]-d;d=E[0];0==a?c(e[0]):(h=32767+a,c(e[L[h]]),c(x[h]));for(e=63;0<e&&0==E[e];e--);if(0==e)return c(g),d;for(a=1;a<=e;){for(b=a;0==E[a]&&a<=e;++a);b=a-b;if(16<=b){h=b>>4;for(q=1;q<=h;++q)c(k);b&=15}h=32767+E[a];c(f[(b<<4)+L[h]]);c(x[h]);a++}63!=e&&c(g);return d}function k(a){0>=a&&(a=1);100<a&&(a=100);if(R!=a){for(var b=50>a?Math.floor(5E3/a):Math.floor(200-2*a),c=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],d=0;64>d;d++){var e=h((c[d]*b+50)/100);1>e?e=1:255<e&&(e=255);l[K[d]]=e}c=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(d=0;64>d;d++)e=h((c[d]*b+50)/100),1>e?e=1:255<e&&(e=255),m[K[d]]=e;b=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];for(d=c=0;8>d;d++)for(e=0;8>e;e++)p[c]=1/(l[K[c]]*b[d]*b[e]*8),H[c]=1/(m[K[c]]*b[d]*b[e]*8),c++;R=a}}var h=Math.floor,l=Array(64),m=Array(64),p=Array(64),H=Array(64),w,z,O,N,x=Array(65535),L=Array(65535),P=Array(64),E=Array(64),M=[],I=0,D=7,S=Array(64),T=Array(64),U=Array(64),Q=Array(256),y=Array(2048),R,K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],aa=[0,1,2,3,4,5,6,7,8,9,10,11],ba=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ca=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(a,b){b&&k(b);M=[];I=0;D=7;d(65496);d(65504);d(16);f(74);f(70);f(73);f(70);f(0);f(1);f(1);f(0);d(1);d(1);f(0);f(0);d(65499);d(132);f(0);for(var e=0;64>e;e++)f(l[e]);f(1);for(e=0;64>e;e++)f(m[e]);var e=a.width,h=a.height;d(65472);d(17);f(8);d(h);d(e);f(3);f(1);f(17);f(0);f(2);f(17);f(1);f(3);f(17);f(1);d(65476);d(418);f(0);for(e=0;16>e;e++)f(V[e+1]);for(e=0;11>=e;e++)f(W[e]);f(16);for(e=0;16>e;e++)f(X[e+1]);for(e=0;161>=e;e++)f(Y[e]);f(1);for(e=0;16>e;e++)f(Z[e+1]);for(e=0;11>=e;e++)f(aa[e]);f(17);for(e=0;16>e;e++)f(ba[e+1]);for(e=0;161>=e;e++)f(ca[e]);d(65498);d(12);f(3);f(1);f(0);f(2);f(17);f(3);f(17);f(0);f(63);f(0);var n=h=e=0;I=0;D=7;this.encode.displayName="_encode_";for(var u=a.data,r=a.height,t=4*a.width,C,J=0,F,x,B,E,G;J<r;){for(C=0;C<t;){E=t*J+C;for(G=0;64>G;G++)x=G>>3,F=4*(G&7),B=E+x*t+F,J+x>=r&&(B-=t*(J+1+x-r)),C+F>=t&&(B-=C+F-t+4),F=u[B++],x=u[B++],B=u[B++],S[G]=(y[F]+y[x+256>>0]+y[B+512>>0]>>16)-128,T[G]=(y[F+768>>0]+y[x+1024>>0]+y[B+1280>>0]>>16)-128,U[G]=(y[F+1280>>0]+y[x+1536>>0]+y[B+1792>>0]>>16)-128;e=g(S,p,e,w,O);h=g(T,H,h,z,N);n=g(U,H,n,z,N);C+=32}J+=8}0<=D&&(e=[],e[1]=D+1,e[0]=(1<<D+1)-1,c(e));d(65497);e="data:image/jpeg;base64,"+btoa(M.join(""));M=[];return e};b||(b=50);(function(){for(var a=String.fromCharCode,b=0;256>b;b++)Q[b]=a(b)})();w=a(V,W);z=a(Z,aa);O=a(X,Y);N=a(ba,ca);(function(){for(var a=1,b=2,c=1;15>=c;c++){for(var e=a;e<b;e++)L[32767+e]=c,x[32767+e]=[],x[32767+e][1]=c,x[32767+e][0]=e;for(e=-(b-1);e<=-a;e++)L[32767+e]=c,x[32767+e]=[],x[32767+e][1]=c,x[32767+e][0]=b-1+e;a<<=1;b<<=1}})();(function(){for(var a=0;256>a;a++)y[a]=19595*a,y[a+256>>0]=38470*a,y[a+512>>0]=7471*a+32768,y[a+768>>0]=-11059*a,y[a+1024>>0]=-21709*a,y[a+1280>>0]=32768*a+8421375,y[a+1536>>0]=-27439*a,y[a+1792>>0]=-5329*a})();k(b)}c.encode=function(b,a){return(new c(a)).encode(b)};return c});l("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(g,h,k){var c=g.canvasToDataUrl,b;g.canvasToDataUrl=function(a,e,f){var d,g,l;if(!k.os.android)return c.apply(null,arguments);"image/jpeg"===e&&"undefined"===typeof b&&(d=c.apply(null,arguments),d=d.split(","),d=~d[0].indexOf("base64")?atob(d[1]):decodeURIComponent(d[1]),d=d.substring(0,2),b=255===d.charCodeAt(0)&&216===d.charCodeAt(1));return"image/jpeg"!==e||b?c.apply(null,arguments):(g=a.width,l=a.height,d=a.getContext("2d"),h.encode(d.getImageData(0,0,g,l),f))}});l("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(g,h,k){return h.register("Image",{modified:!1,init:function(){var c=this,b=new Image;b.onload=function(){c._info={type:c.type,width:this.width,height:this.height};c._metas||"image/jpeg"!==c.type?c.owner.trigger("load"):k.parseMeta(c._blob,function(a,b){c._metas=b;c.owner.trigger("load")})};b.onerror=function(){c.owner.trigger("error")};c._img=b},loadFromBlob:function(c){var b=this._img;this._blob=c;this.type=c.type;b.src=k.createObjectURL(c.getSource());this.owner.once("load",function(){k.revokeObjectURL(b.src)})},resize:function(c,b){var a=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,a,c,b);this._blob=null;this.modified=!0;this.owner.trigger("complete")},getAsBlob:function(c){var b=this._blob,a=this.options;c=c||this.type;if(this.modified||this.type!==c){b=this._canvas;if("image/jpeg"===c){if(b=k.canvasToDataUrl(b,"image/jpeg",a.quality),a.preserveHeaders&&this._metas&&this._metas.imageHead)return b=k.dataURL2ArrayBuffer(b),b=k.updateImageHead(b,this._metas.imageHead),b=k.arrayBufferToBlob(b,c)}else b=k.canvasToDataUrl(b,c);b=k.dataURL2Blob(b)}return b},getAsDataUrl:function(c){var b=this.options;c=c||this.type;return"image/jpeg"===c?k.canvasToDataUrl(this._canvas,c,b.quality):this._canvas.toDataURL(c)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(c){return c?(this._info=c,this):this._info},meta:function(c){return c?(this._meta=c,this):this._meta},destroy:function(){var c=this._canvas;this._img.onload=null;c&&(c.getContext("2d").clearRect(0,0,c.width,c.height),c.width=c.height=0,this._canvas=null);this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";this._img=this._blob=null},_resize:function(c,b,a,e){var f=this.options,d=c.width,g=c.height,h=this.getOrientation(),k;~[5,6,7,8].indexOf(h)&&(a^=e,e^=a,a^=e);k=Math[f.crop?"max":"min"](a/d,e/g);f.allowMagnify||(k=Math.min(1,k));d*=k;g*=k;f.crop?(b.width=a,b.height=e):(b.width=d,b.height=g);a=(b.width-d)/2;e=(b.height-g)/2;f.preserveHeaders||this._rotate2Orientaion(b,h);this._renderImageToCanvas(b,c,a,e,d,g)},_rotate2Orientaion:function(c,b){var a=c.width,e=c.height,f=c.getContext("2d");switch(b){case 5:case 6:case 7:case 8:c.width=e,c.height=a}switch(b){case 2:f.translate(a,0);f.scale(-1,1);break;case 3:f.translate(a,e);f.rotate(Math.PI);break;case 4:f.translate(0,e);f.scale(1,-1);break;case 5:f.rotate(.5*Math.PI);f.scale(1,-1);break;case 6:f.rotate(.5*Math.PI);f.translate(0,-e);break;case 7:f.rotate(.5*Math.PI);f.translate(a,-e);f.scale(-1,1);break;case 8:f.rotate(-.5*Math.PI),f.translate(-a,0)}},_renderImageToCanvas:function(){function c(b,a,c){var e=document.createElement("canvas"),d=e.getContext("2d");a=0;var g=c,h=c;e.width=1;e.height=c;d.drawImage(b,0,0);for(b=d.getImageData(0,0,1,c).data;h>a;)e=b[4*(h-1)+3],0===e?g=h:a=h,h=g+a>>1;c=h/c;return 0===c?1:c}return g.os.ios?7<=g.os.ios?function(b,a,e,f,d,g){var h=a.naturalWidth,k=a.naturalHeight,l=c(a,h,k);return b.getContext("2d").drawImage(a,0,0,h*l,k*l,e,f,d,g)}:function(b,a,e,f,d,g){var h=a.naturalWidth,k=a.naturalHeight;b=b.getContext("2d");var l;var n=a.naturalWidth,p;1048576<n*a.naturalHeight?(p=document.createElement("canvas"),p.width=p.height=1,p=p.getContext("2d"),p.drawImage(a,-n+1,0),l=0===p.getImageData(0,0,1,1).data[3]):l=!1;var m="image/jpeg"===this.type;p=n=0;var w,z;l&&(h/=2,k/=2);b.save();l=document.createElement("canvas");l.width=l.height=1024;w=l.getContext("2d");m=m?c(a,h,k):1;d=Math.ceil(1024*d/h);for(g=Math.ceil(1024*g/k/m);n<k;){for(z=m=0;m<h;)w.clearRect(0,0,1024,1024),w.drawImage(a,-m,-n),b.drawImage(l,0,0,1024,1024,e+z,f+p,d,g),m+=1024,z+=d;n+=1024;p+=g}b.restore()}:function(b,a,c,f,d,g){b.getContext("2d").drawImage(a,c,f,d,g)}}()})});l("runtime/html5/transport",["base","runtime/html5/runtime"],function(g,h){var k=g.noop,c=g.$;return h.register("Transport",{init:function(){this._status=0;this._response=null},send:function(){var b=this.owner,a=this.options,e=this._initAjax(),f=b._blob,d=a.server,h,k,l;a.sendAsBinary?(d+=(/\?/.test(d)?"\x26":"?")+c.param(b._formData),k=f.getSource()):(h=new FormData,c.each(b._formData,function(a,b){h.append(a,b)}),h.append(a.fileVal,f.getSource(),a.filename||b._formData.name||""));a.withCredentials&&"withCredentials"in e?(e.open(a.method,d,!0),e.withCredentials=!0):e.open(a.method,d);this._setRequestHeader(e,a.headers);k?(e.overrideMimeType("application/octet-stream"),g.os.android?(l=new FileReader,l.onload=function(){e.send(this.result);l=l.onload=null},l.readAsArrayBuffer(k)):e.send(k)):e.send(h)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var b=this._xhr;b&&(b.upload.onprogress=k,b.onreadystatechange=k,b.abort(),this._xhr=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,a=new XMLHttpRequest;!this.options.withCredentials||"withCredentials"in a||"undefined"===typeof XDomainRequest||(a=new XDomainRequest);a.upload.onprogress=function(a){var c=0;a.lengthComputable&&(c=a.loaded/a.total);return b.trigger("progress",c)};a.onreadystatechange=function(){if(4===a.readyState)return a.upload.onprogress=k,a.onreadystatechange=k,b._xhr=null,b._status=a.status,200<=a.status&&300>a.status?(b._response=a.responseText,b.trigger("load")):500<=a.status&&600>a.status?(b._response=a.responseText,b.trigger("error","server")):b.trigger("error",b._status?"http":"abort")};return b._xhr=a},_setRequestHeader:function(b,a){c.each(a,function(a,c){b.setRequestHeader(a,c)})},_parseJson:function(b){var a;try{a=JSON.parse(b)}catch(e){a={}}return a}})});l("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(g,h,k){function c(){function b(a,b){var c=a.type||a,e,c=c.split("::");e=c[0];c=c[1];"Ready"===c&&e===l.uid?l.trigger("ready"):d[e]&&d[e].trigger(c.toLowerCase(),a,b)}var c={},d={},k=this.destory,l=this,w=g.guid("webuploader_");h.apply(l,arguments);l.type="flash";l.exec=function(b,e){var f=this.uid,h=g.slice(arguments,2);d[f]=this;return a[b]&&(c[f]||(c[f]=new a[b](this,l)),f=c[f],f[e])?f[e].apply(f,h):l.flashExec.apply(this,arguments)};m[w]=function(){var a=arguments;setTimeout(function(){b.apply(null,a)},1)};this.jsreciver=w;this.destory=function(){return k&&k.apply(this,arguments)};this.flashExec=function(a,b){var c=l.getFlash(),e=g.slice(arguments,2);return c.exec(this.uid,a,b,e)}}var b=g.$,a={};g.inherits(h,{constructor:c,init:function(){var a=this.getContainer(),b=this.options,c;a.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});c='\x3cobject id\x3d"'+this.uid+'" type\x3d"application/x-shockwave-flash" data\x3d"'+b.swf+'" ';g.browser.ie&&(c+='classid\x3d"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');c+='width\x3d"100%" height\x3d"100%" style\x3d"outline:0"\x3e\x3cparam name\x3d"movie" value\x3d"'+b.swf+'" /\x3e\x3cparam name\x3d"flashvars" value\x3d"uid\x3d'+this.uid+"\x26jsreciver\x3d"+this.jsreciver+'" /\x3e\x3cparam name\x3d"wmode" value\x3d"transparent" /\x3e\x3cparam name\x3d"allowscriptaccess" value\x3d"always" /\x3e\x3c/object\x3e';a.html(c)},getFlash:function(){return this._flash?this._flash:this._flash=b("#"+this.uid).get(0)}});c.register=function(c,f){return f=a[c]=g.inherits(k,b.extend({flashExec:function(){var a=this.owner;return this.getRuntime().flashExec.apply(a,arguments)}},f))};11.4<=function(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(f){try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(d){a="0.0"}}a=a.match(/\d+/g);return parseFloat(a[0]+"."+a[1],10)}()&&h.addRuntime("flash",c);return c});l("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(g,h){var k=g.$;return h.register("FilePicker",{init:function(c){c=k.extend({},c);var b,a;b=c.accept&&c.accept.length;for(a=0;a<b;a++)c.accept[a].title||(c.accept[a].title="Files");delete c.button;delete c.container;this.flashExec("FilePicker","init",c)},destroy:function(){}})});l("runtime/flash/image",["runtime/flash/runtime"],function(g){return g.register("Image",{loadFromBlob:function(g){var h=this.owner;h.info()&&this.flashExec("Image","info",h.info());h.meta()&&this.flashExec("Image","meta",h.meta());this.flashExec("Image","loadFromBlob",g.uid)}})});l("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(g,h,k){var c=g.$;return h.register("Transport",{init:function(){this._status=0;this._responseJson=this._response=null},send:function(){var b=this.owner,a=this.options,e=this._initAjax(),f=b._blob,d=a.server,g;e.connectRuntime(f.ruid);a.sendAsBinary?(d+=(/\?/.test(d)?"\x26":"?")+c.param(b._formData),g=f.uid):(c.each(b._formData,function(a,b){e.exec("append",a,b)}),e.exec("appendBlob",a.fileVal,f.uid,a.filename||b._formData.name||""));this._setRequestHeader(e,a.headers);e.exec("send",{method:a.method,url:d},g)},getStatus:function(){return this._status},getResponse:function(){return this._response},getResponseAsJson:function(){return this._responseJson},abort:function(){var b=this._xhr;b&&(b.exec("abort"),b.destroy(),this._xhr=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,a=new k("XMLHttpRequest");a.on("uploadprogress progress",function(a){return b.trigger("progress",a.loaded/a.total)});a.on("load",function(){var c=a.exec("getStatus"),f="";a.off();b._xhr=null;200<=c&&300>c?(b._response=a.exec("getResponse"),b._responseJson=a.exec("getResponseAsJson")):500<=c&&600>c?(b._response=a.exec("getResponse"),b._responseJson=a.exec("getResponseAsJson"),f="server"):f="http";a.destroy();a=null;return f?b.trigger("error",f):b.trigger("load")});a.on("error",function(){a.off();b._xhr=null;b.trigger("error","http")});return b._xhr=a},_setRequestHeader:function(b,a){c.each(a,function(a,c){b.exec("setRequestHeader",a,c)})}})});l("preset/all","base widgets/filednd widgets/filepaste widgets/filepicker widgets/image widgets/queue widgets/runtime widgets/upload widgets/validator runtime/html5/blob runtime/html5/dnd runtime/html5/filepaste runtime/html5/filepicker runtime/html5/imagemeta/exif runtime/html5/androidpatch runtime/html5/image runtime/html5/transport runtime/flash/filepicker runtime/flash/image runtime/flash/transport".split(" "),function(g){return g});l("webuploader",["preset/all"],function(g){return g});return w("webuploader")});